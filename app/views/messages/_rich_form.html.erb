<%= turbo_frame_tag dom_id(message.chat, :input), class: "w-full" do %>
  <%= content_for :page_header do %>
    <meta name="turbo-cache-control" content="no-cache">
    <meta name="turbo-visit-control" content="reload">
    <%= tinymce_assets %>
  <% end %>
  <%= form_with(model: message, class: "w-full flex space-x-2") do |form| %>
    <% if message.chat.accounts.include?(current_account) %>
        <div class="w-full">
            <%= form.hidden_field :chat_id, value: message.chat_id %>
            <%= form.text_area :content, class: "tinymce w-full", rows: 6, cols: 120 %>
            <% if message.errors.size > 0 %>
                <div class="md:hidden tooltip tooltip-top tooltip-error w-full" data-tip="<%= message.errors.full_messages.to_sentence %>">
                    <%= form.submit "Send", class: "md:hidden w-full self-end h-6 btn btn-error pt-1" %>
                </div>
            <% else %>
                <%= form.submit "Send", class: "md:hidden w-full self-end h-6 btn btn-primary pt-1" %>
            <% end %>
        </div>
        <% if message.errors.size > 0 %>
            <div class="tooltip tooltip-top tooltip-error self-end" data-tip="<%= message.errors.full_messages.to_sentence %>">
                <%= form.submit "Send", class: "hidden md:block self-end h-20 btn btn-error pt-1" %>
            </div>
        <% else %>
            <%= form.submit "Send", class: "hidden md:block self-end h-20 btn btn-primary pt-1" %>
        <% end %>
      <% else %>
        <div class="w-full">
            <input type="text" disabled placeholder="You have not joined this chat. Input disabled." class="min-w-full join-item bg-base-100 prose input input-disbled input-bordered input-accent">        
        </div>
        <%= form.submit "Send", disabled: true, class: "self-end h-20 btn btn-disabled pt-1" %>
      <% end %>
  <% end %>
  <%= tinymce convert_urls: true, uploadimage: true %>

<% end %>
